(self["webpackChunknewshop_vue"]=self["webpackChunknewshop_vue"]||[]).push([[977],{977:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Header",{attrs:{name1:"权限管理",name2:"角色列表"}}),n("el-card",[n("el-button",{attrs:{type:"warning"},on:{click:function(t){e.rolesVisible=!0}}},[e._v("添加角色")]),n("el-table",{attrs:{data:e.roleList,border:"",stripe:""}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.children,(function(r,s){return n("el-row",{key:r.id,class:["bdbottom",0===s?"bdtop":"","vcenter"]},[n("el-col",{attrs:{span:5}},[n("el-tag",{attrs:{closable:""},on:{close:function(n){return e.removeAuthName(t.row,r.id)}}},[e._v(" "+e._s(r.authName)+" "),n("i",{staticClass:"el-icon-caret-right"})])],1),n("el-col",{attrs:{span:19}},e._l(r.children,(function(r){return n("el-row",{key:r.id},[n("el-col",{attrs:{span:8}},[n("el-tag",{attrs:{type:"warning",closable:""},on:{close:function(n){return e.removeAuthName(t.row,r.id)}}},[e._v(" "+e._s(r.authName)+" "),n("i",{staticClass:"el-icon-caret-right"})])],1),n("el-col",{attrs:{span:16}},e._l(r.children,(function(r){return n("el-tag",{key:r.id,attrs:{type:"danger",closable:""},on:{close:function(n){return e.removeAuthName(t.row,r.id)}}},[e._v(" "+e._s(r.authName)+" ")])})),1)],1)})),1)],1)}))}}])}),n("el-table-column",{attrs:{label:"#",type:"index"}}),n("el-table-column",{attrs:{label:"角色名称",prop:"roleName"}}),n("el-table-column",{attrs:{label:"角色描述",prop:"roleDesc"}}),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"info",size:"small"},on:{click:function(n){return e.showEditRoles(t.row.id)}}},[e._v("编辑")]),n("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(n){return e.showDisVisitable(t.row)}}},[e._v("分配角色")]),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(n){return e.DelRoles(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),n("el-dialog",{attrs:{visible:e.rolesVisible},on:{"update:visible":function(t){e.rolesVisible=t}}},[n("el-form",{ref:"addref",attrs:{model:e.addRolesList}},[n("el-form-item",{attrs:{label:"角色名称"}},[n("el-input",{model:{value:e.addRolesList.roleName,callback:function(t){e.$set(e.addRolesList,"roleName",t)},expression:"addRolesList.roleName"}})],1),n("el-form-item",{attrs:{label:"角色描述"}},[n("el-input",{model:{value:e.addRolesList.roleDesc,callback:function(t){e.$set(e.addRolesList,"roleDesc",t)},expression:"addRolesList.roleDesc"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.rolesVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.addRoles}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"编辑角色信息",visible:e.eidtRolesVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.eidtRolesVisible=t}}},[n("el-form",{ref:"editref",attrs:{model:e.editRolesList}},[n("el-form-item",{attrs:{label:"角色名称"}},[n("el-input",{model:{value:e.editRolesList.roleName,callback:function(t){e.$set(e.editRolesList,"roleName",t)},expression:"editRolesList.roleName"}})],1),n("el-form-item",{attrs:{label:"角色描述"}},[n("el-input",{model:{value:e.editRolesList.roleDesc,callback:function(t){e.$set(e.editRolesList,"roleDesc",t)},expression:"editRolesList.roleDesc"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.eidtRolesVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.editRoles}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{visible:e.DisVisitable},on:{"update:visible":function(t){e.DisVisitable=t}}},[n("el-tree",{attrs:{props:e.treeProps,load:e.loadNode,lazy:"","show-checkbox":""},on:{"check-change":e.handleCheckChange}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.DisVisitable=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.editDis}},[e._v("确 定")])],1)],1)],1)},s=[],a=n(7673),i=n(6198),o=(n(2222),n(9826),n(1539),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":e.pageSizes,"page-size":e.pageSize,layout:e.layout,background:e.background,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}})],1)}),l=[],u=(n(9653),{props:{layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},pageSizes:{type:Array,default:function(){return[1,5,10,15]}},total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},autoScroll:{type:Boolean,default:!0},background:{type:Boolean,default:!0}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{page:this.currentPage,limit:e})},handleCurrentChange:function(e){this.$emit("pagination",{page:e,limit:this.pageSize})}}}),c=u,d=n(1001),f=(0,d.Z)(c,o,l,!1,null,null,null),p=f.exports,m={name:"Roles",components:{Pages:p},data:function(){return{roleList:[],treeProps:{children:"children",label:"authName"},rolesVisible:!1,addRolesList:{roleName:"",roleDesc:"",authids:[]},editRolesList:{},eidtRolesVisible:!1,DisVisitable:!1,total:100}},created:function(){this.getRoleList()},methods:{getRoleList:function(){var e=this;return(0,i.Z)((0,a.Z)().mark((function t(){var n,r;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("roles");case 2:if(n=t.sent,r=n.data,200===r.meta.status){t.next=6;break}return t.abrupt("return",e.$message.error("获取角色列表失败"));case 6:e.$message.success("获取角色列表成功"),e.roleList=r.data;case 8:case"end":return t.stop()}}),t)})))()},removeAuthName:function(e,t){var n=this;return(0,i.Z)((0,a.Z)().mark((function r(){return(0,a.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:n.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",roundButton:!0}).then((function(){n.$http.delete("roles/".concat(e.id,"/rights/").concat(t)).then((function(t){var r=t.data;if(200!==r.meta.status)return n.$message.error("删除用户失败");n.$message.success("删除用户成功"),e.children=r.data}))})).catch((function(){n.$message({type:"info",message:"已取消删除"})}));case 1:case"end":return r.stop()}}),r)})))()},addRoles:function(){var e=this;this.$refs.addref.validate(function(){var t=(0,i.Z)((0,a.Z)().mark((function t(n){var r,s;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("roles",e.addRolesList);case 4:if(r=t.sent,s=r.data,201===s.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("添加角色失败"));case 8:e.$message.success("添加角色成功"),e.getRoleList(),e.rolesVisible=!1;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},showEditRoles:function(e){this.editRolesList=this.roleList.find((function(t){return t.id===e})),this.eidtRolesVisible=!0},editRoles:function(){var e=this;this.$refs.editref.validate(function(){var t=(0,i.Z)((0,a.Z)().mark((function t(n){var r,s;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.put("roles/".concat(e.editRolesList.id),e.editRolesList);case 4:if(r=t.sent,s=r.data,200===s.meta.status){t.next=8;break}return t.abrupt("return",e.$message.error("编辑角色失败"));case 8:e.$message.success("编辑角色成功"),e.getRoleList(),e.eidtRolesVisible=!1;case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},editDis:function(){},DelRoles:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$http.delete("roles/".concat(e)).then((function(e){var n=e.data;if(200!==n.meta.status)return t.$message.error("删除角色失败");t.$message.success("删除角色成功"),t.getRoleList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleCheckChange:function(){},loadNode:function(){},showDisVisitable:function(e){this.DisVisitable=!0}}},h=m,g=(0,d.Z)(h,r,s,!1,null,"3b1f7487",null),b=g.exports},3111:function(e,t,n){var r=n(1702),s=n(4488),a=n(1340),i=n(1361),o=r("".replace),l="["+i+"]",u=RegExp("^"+l+l+"*"),c=RegExp(l+l+"*$"),d=function(e){return function(t){var n=a(s(t));return 1&e&&(n=o(n,u,"")),2&e&&(n=o(n,c,"")),n}};e.exports={start:d(1),end:d(2),trim:d(3)}},863:function(e,t,n){var r=n(1702);e.exports=r(1..valueOf)},1361:function(e){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},9826:function(e,t,n){"use strict";var r=n(2109),s=n(2092).find,a=n(1223),i="find",o=!0;i in[]&&Array(1)[i]((function(){o=!1})),r({target:"Array",proto:!0,forced:o},{find:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),a(i)},9653:function(e,t,n){"use strict";var r=n(9781),s=n(7854),a=n(1702),i=n(4705),o=n(8052),l=n(2597),u=n(9587),c=n(7976),d=n(2190),f=n(7593),p=n(7293),m=n(8006).f,h=n(1236).f,g=n(3070).f,b=n(863),v=n(3111).trim,y="Number",R=s[y],k=R.prototype,N=s.TypeError,w=a("".slice),_=a("".charCodeAt),x=function(e){var t=f(e,"number");return"bigint"==typeof t?t:L(t)},L=function(e){var t,n,r,s,a,i,o,l,u=f(e,"number");if(d(u))throw N("Cannot convert a Symbol value to a number");if("string"==typeof u&&u.length>2)if(u=v(u),t=_(u,0),43===t||45===t){if(n=_(u,2),88===n||120===n)return NaN}else if(48===t){switch(_(u,1)){case 66:case 98:r=2,s=49;break;case 79:case 111:r=8,s=55;break;default:return+u}for(a=w(u,2),i=a.length,o=0;o<i;o++)if(l=_(a,o),l<48||l>s)return NaN;return parseInt(a,r)}return+u};if(i(y,!R(" 0o1")||!R("0b1")||R("+0x1"))){for(var $,V=function(e){var t=arguments.length<1?0:R(x(e)),n=this;return c(k,n)&&p((function(){b(n)}))?u(Object(t),n,V):t},S=r?m(R):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),z=0;S.length>z;z++)l(R,$=S[z])&&!l(V,$)&&g(V,$,h(R,$));V.prototype=k,k.constructor=V,o(s,y,V,{constructor:!0})}}}]);
//# sourceMappingURL=977.fcc9f09a.js.map